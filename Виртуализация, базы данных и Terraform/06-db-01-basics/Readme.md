# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

Ответ:
1. Электронные чеки в json виде - Документо-ориентированная (Каждый документ представляет данные в виде ключ-значение, связь с другими документами и мета-полями), либо тип "Ключ-значение", так как json данные и есть множество пар ключ-значение.
2. Склады и автомобильные дороги для логистической компании - Подойдет графовая БД, Узел представляет собой объект (в нашем случае склад). Ребро(в нашем случае это автомобильные дороги) представляет собой отношение, которое соединяет узлы. 
3. Генеалогические деревья - Иерархическая модель. В иерархической модели данные организованы в древовидную структуру(то есть буквально подходил для хранения такого типа данных).
4. Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации - подойдет БД Ключ-значение, где в виде ключа будет логин пользователя, а в виде значения, например, пользовательский токен аутентификации. 
5. Отношения клиент-покупка для интернет-магазина - судя по материалам из лекции - это БД типа Документо-ориентированная(например MongoDB).

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

Ответ:
- Данные записываются на все узлы с задержкой до часа (асинхронная запись):

1. CAP - AP, Так как данные не консистентны, но доступны и устойчивы к разделению.
2. PACELC - PA/EL При сетевом разделении данные доступны, но не согласованы, при отсутствии разделения предположительно Latency.

- При сетевых сбоях, система может разделиться на 2 раздельных кластера:
1. CAP - AP. При сбоях система продолжит отвечать, но данные будут не согласованы.
2. PACELC - При сетевом разделении данные доступны, но не согласованы, при отсутствии разделения голосую за consistency.

- Система может не прислать корректный ответ или сбросить соединение:
1. CAP - CA. Так как в случае проблем в работе системы она не отправляет несогласованные данные, а возвращает информацию о сбое (например код ошибки)  
2. PACELC - PC/EC При сетевом разделении базы недоступны, но согласованы, в случае отсутствия разделения данные будут согласованы. 

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Ответ:
Эти принципы сочетаться не могут. Так как BASE и ACID противопоставляются друг другу. ACID подразумевает надежность, BASE про скорость вычисления. 

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

Ответ:
Это Redis.
Минусом системы Redis можно считать способ хранения данных, так как все данные хранятся в оперативной памяти - потребуется достаточно ресурсов RAM(Размер БД ограничен доступной памятью), что также влечет за собой возможную потерю данных. 

---


---
